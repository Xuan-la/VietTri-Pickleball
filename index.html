<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n L√Ω CLB Pickleball - Firebase</title>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js"></script>
    <style>
        :root {
            --color-primary: #208791;
            --color-primary-hover: #186e7e;
            --color-text: #134252;
            --color-text-secondary: #626c7c;
            --color-bg: #fcfcf9;
            --color-surface: #fffffe;
            --color-border: rgba(94, 82, 64, 0.2);
            --color-success: #22c75a;
            --color-error: #c0152f;
            --radius: 8px;
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--color-bg);
            color: var(--color-text);
            padding: 16px;
            line-height: 1.5;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px solid var(--color-primary);
        }

        header h1 {
            font-size: 24px;
            color: var(--color-primary);
            margin-bottom: 4px;
        }

        header p {
            color: var(--color-text-secondary);
            font-size: 14px;
        }

        .auth-section {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 24px;
            text-align: center;
        }

        .form-group {
            margin-bottom: 16px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 14px;
            color: var(--color-text);
        }

        input, select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--color-border);
            border-radius: var(--radius);
            font-size: 14px;
            color: var(--color-text);
            background: var(--color-surface);
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(32, 135, 145, 0.15);
        }

        .btn {
            width: 100%;
            padding: 12px 16px;
            background: var(--color-primary);
            color: white;
            border: none;
            border-radius: var(--radius);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 150ms;
            margin-top: 8px;
        }

        .btn:hover {
            background: var(--color-primary-hover);
        }

        .btn-secondary {
            background: #666;
        }

        .btn-secondary:hover {
            background: #555;
        }

        .tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
            border-bottom: 1px solid var(--color-border);
            overflow-x: auto;
        }

        .tab-btn {
            padding: 12px 16px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            color: var(--color-text-secondary);
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 150ms;
            white-space: nowrap;
        }

        .tab-btn.active {
            color: var(--color-primary);
            border-bottom-color: var(--color-primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .message {
            padding: 12px 16px;
            border-radius: var(--radius);
            margin-bottom: 16px;
            display: none;
        }

        .message.success {
            display: block;
            background: rgba(34, 199, 90, 0.1);
            color: #1a8a3a;
            border: 1px solid rgba(34, 199, 90, 0.3);
        }

        .message.error {
            display: block;
            background: rgba(192, 21, 47, 0.1);
            color: #a0121f;
            border: 1px solid rgba(192, 21, 47, 0.3);
        }

        .member-list {
            margin-top: 16px;
        }

        .member-item {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: var(--radius);
            padding: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .member-name {
            font-weight: 600;
        }

        .member-badge {
            display: inline-block;
            padding: 4px 12px;
            background: rgba(32, 135, 145, 0.1);
            color: var(--color-primary);
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .member-badge.guest {
            background: rgba(165, 75, 47, 0.1);
            color: #a84b2f;
        }

        .delete-btn {
            background: var(--color-error);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            margin: 0;
        }

        .delete-btn:hover {
            background: #a0121f;
        }

        .loading {
            text-align: center;
            color: var(--color-text-secondary);
            padding: 20px;
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--color-success);
            margin-right: 8px;
        }

        .status-indicator.offline {
            background: #ff9800;
        }

        .row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        .row .form-group {
            margin-bottom: 0;
        }

        .match-item {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: var(--radius);
            padding: 12px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .match-info {
            flex: 1;
        }

        .match-players {
            font-weight: 600;
            margin-bottom: 4px;
            font-size: 14px;
        }

        .match-score {
            font-size: 12px;
            color: var(--color-text-secondary);
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--color-text-secondary);
        }

        h2 {
            font-size: 18px;
            margin-top: 16px;
            margin-bottom: 12px;
            color: var(--color-text);
        }

        h3 {
            font-size: 16px;
            margin-top: 12px;
            margin-bottom: 8px;
            color: var(--color-text);
        }

        .add-form {
            background: rgba(32, 135, 145, 0.05);
            border: 1px solid var(--color-primary);
            border-radius: var(--radius);
            padding: 16px;
            margin-bottom: 24px;
        }

        .add-form h3 {
            margin-top: 0;
        }

        .section-header {
            margin-top: 24px;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--color-primary);
        }

        .info-box {
            background: rgba(34, 199, 90, 0.1);
            border: 1px solid rgba(34, 199, 90, 0.3);
            padding: 12px;
            border-radius: var(--radius);
            font-size: 12px;
            color: #1a8a3a;
            margin-bottom: 16px;
        }

        .loading-spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(32, 135, 145, 0.3);
            border-top: 2px solid var(--color-primary);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üèì Qu·∫£n L√Ω CLB Pickleball</h1>
            <p>L∆∞u tr·ªØ tr√™n Firebase - <span class="status-indicator" id="statusIndicator"></span><span id="statusText">K·∫øt n·ªëi...</span></p>
        </header>

        <div class="message" id="message"></div>

        <!-- Auth Section -->
        <div class="auth-section" id="authSection">
            <h2>ƒêƒÉng Nh·∫≠p Firebase</h2>
            <div class="form-group">
                <label for="authEmail">Email</label>
                <input type="email" id="authEmail" placeholder="your@email.com">
            </div>
            <div class="form-group">
                <label for="authPassword">M·∫≠t Kh·∫©u</label>
                <input type="password" id="authPassword" placeholder="M·∫≠t kh·∫©u">
            </div>
            <button class="btn" onclick="loginOrSignup()">ƒêƒÉng Nh·∫≠p / ƒêƒÉng K√Ω</button>
            <button class="btn btn-secondary" onclick="loginAnonymous()">Kh√°ch (T·∫°m Th·ªùi)</button>
        </div>

        <!-- Main App Section (Hidden until authenticated) -->
        <div id="appSection" style="display: none;">
            <button class="btn btn-secondary" style="width: auto; margin-bottom: 16px;" onclick="logout()">ƒêƒÉng Xu·∫•t</button>

            <div class="tabs">
                <button class="tab-btn active" onclick="switchTab(event, 'members')">üë• Th√†nh Vi√™n</button>
                <button class="tab-btn" onclick="switchTab(event, 'matches')">üéæ Tr·∫≠n ƒê·∫•u</button>
                <button class="tab-btn" onclick="switchTab(event, 'ranking')">üí∞ B·∫£ng X·∫øp H·∫°ng</button>
            </div>

            <!-- Tab Th√†nh Vi√™n -->
            <div id="members" class="tab-content active">
                <div class="add-form">
                    <h3>‚ûï Th√™m Th√†nh Vi√™n</h3>
                    <div class="row">
                        <div class="form-group">
                            <label for="memberName">T√™n VƒêV</label>
                            <input type="text" id="memberName" placeholder="Nh·∫≠p t√™n">
                        </div>
                        <div class="form-group">
                            <label for="memberType">Lo·∫°i</label>
                            <select id="memberType">
                                <option value="club">Th√†nh Vi√™n CLB</option>
                                <option value="guest">Kh√°ch</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn" onclick="addMember()">‚ûï Th√™m VƒêV</button>
                </div>

                <h2 class="section-header">üë• Danh S√°ch Th√†nh Vi√™n CLB</h2>
                <div class="member-list" id="clubMembersList"><div class="empty-state"><p>Ch∆∞a c√≥ th√†nh vi√™n</p></div></div>

                <h2 class="section-header">ü§ù Danh S√°ch Kh√°ch</h2>
                <div class="member-list" id="guestMembersList"><div class="empty-state"><p>Ch∆∞a c√≥ kh√°ch</p></div></div>
            </div>

            <!-- Tab Tr·∫≠n ƒê·∫•u -->
            <div id="matches" class="tab-content">
                <div class="add-form">
                    <h3>‚ûï Th√™m Tr·∫≠n ƒê·∫•u</h3>
                    <div class="row">
                        <div class="form-group">
                            <label for="pair1_player1">C·∫∑p 1 - VƒêV 1</label>
                            <select id="pair1_player1"></select>
                        </div>
                        <div class="form-group">
                            <label for="pair1_player2">C·∫∑p 1 - VƒêV 2</label>
                            <select id="pair1_player2"></select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label for="pair2_player1">C·∫∑p 2 - VƒêV 1</label>
                            <select id="pair2_player1"></select>
                        </div>
                        <div class="form-group">
                            <label for="pair2_player2">C·∫∑p 2 - VƒêV 2</label>
                            <select id="pair2_player2"></select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label for="score1">ƒêi·ªÉm C·∫∑p 1</label>
                            <input type="number" id="score1" placeholder="15" min="0">
                        </div>
                        <div class="form-group">
                            <label for="score2">ƒêi·ªÉm C·∫∑p 2</label>
                            <input type="number" id="score2" placeholder="10" min="0">
                        </div>
                    </div>
                    <button class="btn" onclick="addMatch()">‚ûï Th√™m Tr·∫≠n ƒê·∫•u</button>
                </div>

                <h2 class="section-header">üéæ Danh S√°ch Tr·∫≠n ƒê·∫•u</h2>
                <div id="matchList" class="member-list"><div class="empty-state"><p>Ch∆∞a c√≥ tr·∫≠n ƒë·∫•u</p></div></div>
            </div>

            <!-- Tab B·∫£ng X·∫øp H·∫°ng -->
            <div id="ranking" class="tab-content">
                <h2>üí∞ B·∫£ng X·∫øp H·∫°ng Ti·ªÅn</h2>
                <div id="rankingList" class="member-list"><div class="empty-state"><p>Ch∆∞a c√≥ d·ªØ li·ªáu</p></div></div>
            </div>
        </div>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBG-6841iqN0DM-n7Bz7rbMSlAF5rqQtU",
            authDomain: "vietri-c414e.firebaseapp.com",
            databaseURL: "https://vietri-c414e-default-rtdb.asia-southeast1.firebaseio.com",
            projectId: "vietri-c414e",
            storageBucket: "vietri-c414e.firebasestorage.app",
            messagingSenderId: "149479382894",
            appId: "1:149479382894:web:9408a8cc797ef22fe42b7f"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        const auth = firebase.auth();

        let currentUser = null;
        let members = [];
        let matches = [];

        // Auth State
        auth.onAuthStateChanged(user => {
            if (user) {
                currentUser = user;
                document.getElementById('authSection').style.display = 'none';
                document.getElementById('appSection').style.display = 'block';
                loadData();
                updateStatusIndicator(true);
            } else {
                currentUser = null;
                document.getElementById('authSection').style.display = 'block';
                document.getElementById('appSection').style.display = 'none';
                updateStatusIndicator(false);
            }
        });

        // Online/Offline Status
        db.ref('.info/connected').on('value', snap => {
            if (snap.val() === true) {
                updateStatusIndicator(true);
            } else {
                updateStatusIndicator(false);
            }
        });

        function updateStatusIndicator(isOnline) {
            const indicator = document.getElementById('statusIndicator');
            const text = document.getElementById('statusText');
            if (isOnline) {
                indicator.classList.remove('offline');
                text.textContent = 'K·∫øt n·ªëi';
            } else {
                indicator.classList.add('offline');
                text.textContent = 'Ngo·∫°i tuy·∫øn';
            }
        }

        function loginOrSignup() {
            const email = document.getElementById('authEmail').value.trim();
            const password = document.getElementById('authPassword').value;

            if (!email || !password) {
                showMessage('Vui l√≤ng nh·∫≠p email v√† m·∫≠t kh·∫©u', 'error');
                return;
            }

            auth.signInWithEmailAndPassword(email, password)
                .catch(error => {
                    if (error.code === 'auth/user-not-found') {
                        return auth.createUserWithEmailAndPassword(email, password);
                    }
                    throw error;
                })
                .then(() => {
                    showMessage('‚úì ƒêƒÉng nh·∫≠p th√†nh c√¥ng', 'success');
                })
                .catch(error => {
                    showMessage(`‚ùå L·ªói: ${error.message}`, 'error');
                });
        }

        function loginAnonymous() {
            auth.signInAnonymously()
                .then(() => {
                    showMessage('‚úì ƒêƒÉng nh·∫≠p kh√°ch th√†nh c√¥ng', 'success');
                })
                .catch(error => {
                    showMessage(`‚ùå L·ªói: ${error.message}`, 'error');
                });
        }

        function logout() {
            auth.signOut()
                .then(() => {
                    members = [];
                    matches = [];
                    document.getElementById('authEmail').value = '';
                    document.getElementById('authPassword').value = '';
                    showMessage('‚úì ƒê√£ ƒëƒÉng xu·∫•t', 'success');
                })
                .catch(error => {
                    showMessage(`‚ùå L·ªói: ${error.message}`, 'error');
                });
        }

        function loadData() {
            if (!currentUser) return;

            const userRef = db.ref(`users/${currentUser.uid}`);

            // Load members
            userRef.child('members').on('value', snap => {
                members = [];
                snap.forEach(child => {
                    members.push(child.val());
                });
                updateMembersList();
                loadPlayerSelects();
            });

            // Load matches
            userRef.child('matches').on('value', snap => {
                matches = [];
                snap.forEach(child => {
                    matches.push(child.val());
                });
                updateMatchList();
                updateRanking();
            });
        }

        function addMember() {
            const name = document.getElementById('memberName').value.trim();
            const type = document.getElementById('memberType').value;

            if (!name) {
                showMessage('Vui l√≤ng nh·∫≠p t√™n VƒêV', 'error');
                return;
            }

            if (members.some(m => m.name.toLowerCase() === name.toLowerCase())) {
                showMessage('VƒêV n√†y ƒë√£ c√≥ trong danh s√°ch', 'error');
                return;
            }

            const memberId = Date.now().toString();
            const memberData = { id: memberId, name, type };

            db.ref(`users/${currentUser.uid}/members/${memberId}`).set(memberData)
                .then(() => {
                    showMessage(`‚úì ƒê√£ th√™m VƒêV: ${name}`, 'success');
                    document.getElementById('memberName').value = '';
                    document.getElementById('memberType').value = 'club';
                })
                .catch(error => {
                    showMessage(`‚ùå L·ªói: ${error.message}`, 'error');
                });
        }

        function deleteMember(id) {
            if (confirm('X√≥a VƒêV n√†y?')) {
                db.ref(`users/${currentUser.uid}/members/${id}`).remove()
                    .then(() => {
                        showMessage('‚úì ƒê√£ x√≥a VƒêV', 'success');
                    })
                    .catch(error => {
                        showMessage(`‚ùå L·ªói: ${error.message}`, 'error');
                    });
            }
        }

        function updateMembersList() {
            const clubList = members.filter(m => m.type === 'club');
            const guestList = members.filter(m => m.type === 'guest');

            const clubHtml = clubList.length > 0
                ? clubList.map(m => `
                    <div class="member-item">
                        <div>
                            <div class="member-name">${m.name}</div>
                            <span class="member-badge">Th√†nh Vi√™n CLB</span>
                        </div>
                        <button class="delete-btn" onclick="deleteMember('${m.id}')">X√≥a</button>
                    </div>
                `).join('')
                : '<div class="empty-state"><p>Ch∆∞a c√≥ th√†nh vi√™n CLB</p></div>';

            const guestHtml = guestList.length > 0
                ? guestList.map(m => `
                    <div class="member-item">
                        <div>
                            <div class="member-name">${m.name}</div>
                            <span class="member-badge guest">Kh√°ch</span>
                        </div>
                        <button class="delete-btn" onclick="deleteMember('${m.id}')">X√≥a</button>
                    </div>
                `).join('')
                : '<div class="empty-state"><p>Ch∆∞a c√≥ kh√°ch</p></div>';

            document.getElementById('clubMembersList').innerHTML = clubHtml;
            document.getElementById('guestMembersList').innerHTML = guestHtml;
        }

        function loadPlayerSelects() {
            const playerNames = members.map(m => m.name);
            const selects = ['pair1_player1', 'pair1_player2', 'pair2_player1', 'pair2_player2'];

            selects.forEach(id => {
                const elem = document.getElementById(id);
                const currentValue = elem.value;
                elem.innerHTML = '<option value="">-- Ch·ªçn --</option>';
                playerNames.forEach(name => {
                    elem.innerHTML += `<option value="${name}">${name}</option>`;
                });
                if (currentValue) elem.value = currentValue;
            });
        }

        function addMatch() {
            const p1_1 = document.getElementById('pair1_player1').value;
            const p1_2 = document.getElementById('pair1_player2').value;
            const p2_1 = document.getElementById('pair2_player1').value;
            const p2_2 = document.getElementById('pair2_player2').value;
            const score1 = parseInt(document.getElementById('score1').value) || 0;
            const score2 = parseInt(document.getElementById('score2').value) || 0;

            if (!p1_1 || !p1_2 || !p2_1 || !p2_2) {
                showMessage('Vui l√≤ng ch·ªçn ƒë·ªß 4 VƒêV', 'error');
                return;
            }

            const allPlayers = [p1_1, p1_2, p2_1, p2_2];
            if (new Set(allPlayers).size !== 4) {
                showMessage('C√°c VƒêV kh√¥ng ƒë∆∞·ª£c tr√πng nhau', 'error');
                return;
            }

            if (score1 === 0 && score2 === 0) {
                showMessage('Vui l√≤ng nh·∫≠p ƒëi·ªÉm s·ªë', 'error');
                return;
            }

            const matchId = Date.now().toString();
            const matchData = {
                id: matchId,
                pair1: [p1_1, p1_2],
                pair2: [p2_1, p2_2],
                score1,
                score2,
                date: new Date().toISOString(),
                result1: score1 > score2 ? 'win' : 'lose',
                result2: score2 > score1 ? 'win' : 'lose'
            };

            db.ref(`users/${currentUser.uid}/matches/${matchId}`).set(matchData)
                .then(() => {
                    showMessage(`‚úì Th√™m tr·∫≠n: (${p1_1}+${p1_2}) ${score1}-${score2} (${p2_1}+${p2_2})`, 'success');
                    document.getElementById('score1').value = '';
                    document.getElementById('score2').value = '';
                    document.getElementById('pair1_player1').value = '';
                    document.getElementById('pair1_player2').value = '';
                    document.getElementById('pair2_player1').value = '';
                    document.getElementById('pair2_player2').value = '';
                })
                .catch(error => {
                    showMessage(`‚ùå L·ªói: ${error.message}`, 'error');
                });
        }

        function deleteMatch(id) {
            if (confirm('X√≥a tr·∫≠n ƒë·∫•u n√†y?')) {
                db.ref(`users/${currentUser.uid}/matches/${id}`).remove()
                    .then(() => {
                        showMessage('‚úì ƒê√£ x√≥a tr·∫≠n ƒë·∫•u', 'success');
                    })
                    .catch(error => {
                        showMessage(`‚ùå L·ªói: ${error.message}`, 'error');
                    });
            }
        }

        function updateMatchList() {
            const matchHtml = matches.length > 0
                ? [...matches].reverse().map(m => {
                    const result1 = m.result1 === 'win' ? '‚úì Th·∫Øng' : '‚úó Thua';
                    const result2 = m.result2 === 'win' ? '‚úì Th·∫Øng' : '‚úó Thua';
                    const date = new Date(m.date).toLocaleDateString('vi-VN');
                    return `
                        <div class="match-item">
                            <div class="match-info">
                                <div class="match-players">(${m.pair1[0]}+${m.pair1[1]}) <strong>${m.score1}</strong> vs <strong>${m.score2}</strong> (${m.pair2[0]}+${m.pair2[1]})</div>
                                <div class="match-score">${date} ‚Ä¢ ${result1} / ${result2}</div>
                            </div>
                            <button class="delete-btn" onclick="deleteMatch('${m.id}')">X√≥a</button>
                        </div>
                    `;
                }).join('')
                : '<div class="empty-state"><p>Ch∆∞a c√≥ tr·∫≠n ƒë·∫•u</p></div>';

            document.getElementById('matchList').innerHTML = matchHtml;
        }

        function updateRanking() {
            const stats = {};

            matches.forEach(m => {
                [m.pair1[0], m.pair1[1]].forEach(p => {
                    if (!stats[p]) stats[p] = { wins: 0, losses: 0, money: 0 };
                });
                [m.pair2[0], m.pair2[1]].forEach(p => {
                    if (!stats[p]) stats[p] = { wins: 0, losses: 0, money: 0 };
                });

                if (m.result1 === 'win') {
                    [m.pair1[0], m.pair1[1]].forEach(p => {
                        stats[p].wins++;
                        stats[p].money += 50000;
                    });
                    [m.pair2[0], m.pair2[1]].forEach(p => {
                        stats[p].losses++;
                        stats[p].money -= 50000;
                    });
                } else {
                    [m.pair2[0], m.pair2[1]].forEach(p => {
                        stats[p].wins++;
                        stats[p].money += 50000;
                    });
                    [m.pair1[0], m.pair1[1]].forEach(p => {
                        stats[p].losses++;
                        stats[p].money -= 50000;
                    });
                }
            });

            const ranking = Object.entries(stats)
                .map(([name, data]) => ({ name, ...data }))
                .sort((a, b) => b.money - a.money);

            const rankingHtml = ranking.length > 0
                ? ranking.map((r, i) => `
                    <div class="member-item">
                        <div>
                            <div class="member-name">${i + 1}. ${r.name}</div>
                            <div class="match-score">${r.wins}W / ${r.losses}L</div>
                        </div>
                        <div style="font-weight: 600; color: ${r.money >= 0 ? 'green' : 'red'};">
                            ${r.money >= 0 ? '+' : ''}${(r.money / 1000).toFixed(0)}k
                        </div>
                    </div>
                `).join('')
                : '<div class="empty-state"><p>Ch∆∞a c√≥ d·ªØ li·ªáu</p></div>';

            document.getElementById('rankingList').innerHTML = rankingHtml;
        }

        function switchTab(event, tabName) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        function showMessage(text, type) {
            const msg = document.getElementById('message');
            msg.textContent = text;
            msg.className = `message ${type}`;
            setTimeout(() => {
                msg.className = 'message';
            }, 3000);
        }
    </script>
</body>
</html>
